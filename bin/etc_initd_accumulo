#! /usr/bin/env bash
#
# accumulo            This shell script takes care of stoping and starting 
#                      accumulo on a single server
# chkconfig: - 60 20
# description: Accumulo: an implementation of Google's BigTable
# probe: false

. /etc/rc.d/init.d/functions

# lets assume this file is symlinked in from accumulo distro bin directory
# otherwise reset the ACCUMULO_HOME settting
pwd=`pwd -P`
ACCUMULO_HOME=`cd $pwd/.. ; pwd -P`

RETVAL=0
case "$1" in
   start)
        $ACCUMULO_HOME/bin/start-here.sh
        RETVAL=$?
   ;;
   stop)
        $ACCUMULO_HOME/bin/stop-here.sh
        RETVAL=$?
   ;;
   status)
        COUNT=`pgrep -f "$ACCUMULO_HOME.*org.apache.accumulo.start" | wc -l`
        echo "There are $COUNT accumulo processes on this machine"
   ;;
   restart)
        $0 stop
        $0 start
   ;;
   *)
      echo "Usage: $0 {start|stop|status|restart}"
      exit 1
   ;;
esac

exit 0
